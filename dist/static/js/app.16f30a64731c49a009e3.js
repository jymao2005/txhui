webpackJsonp([1],Array(44).concat([function(e,t,n){function r(e){n(551)}var o=n(4)(n(217),n(620),r,null,null);e.exports=o.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(16),o=n.n(r),s=n(15),i=n.n(s);t.a={methods:{publishPost:function(e){var t=this,n=e.html,r=e.creator,s=e.ts,a=void 0===s?0:s,u=e.groupId,c=e.type,l=void 0===c?"短笔记":c;return i()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,t.$http.post("/g/Post").send({html:n,creator:r._id,creatorName:r.name,creatorFigureUrl:r.figureUrl,ts:a,longTS:1001*a+Math.floor(999*Math.random()),groups:[u],type:l});case 4:return s=e.sent,e.abrupt("return",s.body);case 8:e.prev=8,e.t0=e.catch(0),t.$message({message:"好奇怪, 发表失败了...也许服务器出问题了",type:"warning"});case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t,n){function r(e){n(534),n(535)}var o=n(4)(n(227),n(600),r,"data-v-306931d2",null);e.exports=o.exports},function(e,t,n){function r(e){n(540)}var o=n(4)(n(235),n(604),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(538),n(537)}var o=n(4)(n(242),n(602),r,"data-v-31266fac",null);e.exports=o.exports},function(e,t,n){"use strict";function r(e){if(e<0)return"00:00:00";var t=e%60,n=Math.floor(e/60),r=n%60,o=Math.floor(n/60),s=function(e){return e>9?""+e:"0"+e};return s(o)+":"+s(r)+":"+s(t)}function o(e){var t=new Date(e),n=new Date,r=Math.max(n-t,0),o=function(e,t){return Math.floor(e/t)},s=o(r,1e3),i=o(s,60),a=o(i,60),u=o(a,24),c=o(u,30);return o(c,12)&&t.toLocaleDateString()||c&&c+"月前"||u&&u+"天前"||a&&a+"小时前"||i&&i+"分钟前"||s+"秒前"}var s=n(54),i=n.n(s),a=n(94),u=n.n(a),c=n(521),l=(n.n(c),n(493)),p=n.n(l),f=n(518),d=(n.n(f),n(490)),m=n.n(d),h=n(519),g=(n.n(h),n(491)),v=n.n(g),_=n(527),y=(n.n(_),n(500)),b=n.n(y),w=n(520),x=(n.n(w),n(492)),S=n.n(x),$=n(513),k=(n.n($),n(484)),C=n.n(k),I=n(514),T=(n.n(I),n(485)),P=n.n(T),M=n(522),L=(n.n(M),n(494)),G=n.n(L),E=n(525),F=(n.n(E),n(497)),N=n.n(F),D=n(524),R=(n.n(D),n(496)),B=n.n(R),A=n(523),O=(n.n(A),n(495)),j=n.n(O),z=n(526),H=(n.n(z),n(499)),q=n.n(H),U=n(512),J=(n.n(U),n(483)),W=n.n(J),K=n(510),V=(n.n(K),n(482)),Z=n.n(V),Q=n(508),X=(n.n(Q),n(480)),Y=n.n(X),ee=n(509),te=(n.n(ee),n(481)),ne=n.n(te),re=n(528),oe=(n.n(re),n(501)),se=n.n(oe),ie=n(529),ae=(n.n(ie),n(502)),ue=n.n(ae),ce=n(511),le=(n.n(ce),n(177)),pe=n.n(le),fe=n(530),de=(n.n(fe),n(179)),me=n.n(de),he=n(517),ge=(n.n(he),n(487)),ve=n.n(ge),_e=n(515),ye=(n.n(_e),n(486)),be=n.n(ye),we=n(516),xe=(n.n(we),n(183)),Se=(n.n(xe),n(129)),$e=n.n(Se),ke=n(569),Ce=n(567),Ie=n(571),Te=n(570),Pe=n(568),Me=n(573),Le=n(572),Ge=n(44),Ee=n.n(Ge),Fe=n(185),Ne=n.n(Fe),De=n(595),Re=n.n(De),Be=n(596),Ae=n.n(Be),Oe=n(22),je=n(180),ze=n.n(je),He=(Le.default,Me.default,Pe.default,Te.default,Ie.default,Ce.default,ke.default,{Input:$e.a,IconFA:Ee.a,Icon:be.a,Loading:ve.a,Tag:me.a,Button:pe.a,Tabs:ue.a,TabPane:se.a,Breadcrumb:ne.a,BreadcrumbItem:Y.a,Editor:Ne.a,ButtonGroup:Z.a,Timeline:Re.a,TimelineItem:Ae.a,Dialog:W.a,Select:q.a,Option:j.a,Popover:B.a,Progress:N.a,Message:G.a,Form:P.a,FormItem:C.a,Menu:S.a,Submenu:b.a,MenuItem:v.a,MenuItemGroup:m.a,MessageBox:p.a}),qe=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];u()(He).forEach(function(t){e.component(t,He[t])}),e.directive("clickoutside",ze.a),e.use(ve.a.directive),e.prototype.$loading=ve.a.service,e.prototype.formatTS=r,e.prototype.formatDatetime=o,e.prototype.$message=G.a,e.prototype.$msgbox=p.a,e.prototype.$alert=p.a.alert,e.prototype.$confirm=p.a.confirm,e.prototype.$prompt=p.a.prompt,i()(e.prototype,{mapState:Oe.a,mapMutations:Oe.b})};"undefined"!=typeof window&&window.Vue&&qe(window.Vue),t.a=i()(He,{install:qe})},function(e,t,n){"use strict";var r=n(12),o=n(625),s=n(577),i=n.n(s),a=n(588),u=n.n(a),c=n(575),l=n.n(c),p=n(576),f=n.n(p),d=n(584),m=n.n(d),h=n(586),g=n.n(h),v=n(587),_=n.n(v),y=n(585),b=n.n(y);r.default.use(o.a);var w=new o.a({routes:[{path:"/welcome",component:i.a},{path:"/group/:groupId",component:u.a,children:[{path:"",redirect:"Timeline"},{path:"newest",name:"newest",component:m.a},{path:"questions",name:"questions",component:g.a},{path:"timeline",name:"timeline",component:_.a},{path:"note-tree",name:"note-tree",component:b.a}]},{path:"/home",component:l.a},{path:"/u/:userId",component:f.a},{path:"/",redirect:function(){return localStorage.getItem("userInfo"),"/welcome"}},{path:"/login",redirect:function(e){setTimeout(function(){var t=e.query;window.$store.dispatch("user/loginOnServer",t)},100);var t=window.localStorage.getItem("lastPath")||"/";return t&&-1!==t.indexOf("/login")&&(t="/"),{path:t,query:{empty:!0}}}}]});t.a=w},function(e,t,n){"use strict";var r=n(12),o=n(22),s=n(250),i=n(249);r.default.use(o.e),t.a=new o.e.Store({modules:{user:s.a,group:i.a},state:{curGroup:{}},getters:{curGroupId:function(e){return e.curGroup._id}},mutations:{curGroup:function(e,t){e.curGroup=t},setCurGroupMember:function(e,t){$$vm.$set(e.curGroup,"members",t)}}})},function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){var n=t.url;return e.some(function(e){return-1!=n.indexOf(e)})?t:t.withCredentials()}}},function(e,t,n){"use strict";var r=n(251);t.a={rules:r.a}},,function(e,t,n){function r(e){n(545)}var o=n(4)(n(218),n(610),r,null,null);e.exports=o.exports},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o={};t.default={name:"icon",props:{name:{type:String,validator:function(e){return e?e in o||(r.default.util.warn('Invalid prop: prop "icon" is referring to an unregistered icon "'+e+'".\nPlesase make sure you have imported this icon before using it.',this),!1):null}},scale:[Number,String],spin:Boolean,inverse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(r.default.util.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},clazz:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse}},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,n=0;this.$children.forEach(function(e){t=Math.max(t,e.width),n=Math.max(n,e.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}},register:function(e){for(var t in e){var n=e[t];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),o[t]=n}},icons:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(579),o=n.n(r),s=n(580),i=n.n(s),a=n(578),u=n.n(a),c=n(581),l=n.n(c);t.default={data:function(){return{}},components:{Login:o.a,Register:i.a,CreateGroup:u.a,Sidebar:l.a},created:function(){this.$store.dispatch("user/loadUser",this.$http)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s),a=n(25),u=n.n(a),c=n(22);t.default={data:function(){return{groupName:"",creatorName:""}},computed:u()({},n.i(c.a)("group/",["groupList"]),{filteredList:function(){var e=this.groupList,t=function(t,n){return t?e.filter(function(e){return new RegExp(t,"i").test(n(e))}):e};return e=t(this.creatorName,function(e){return e.creator.name}),e=t(this.groupName,function(e){return e.name})}}),created:function(){var e=this;return i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$loading(),t.next=3,e.$store.dispatch("group/loadGroupList");case 3:n.close();case 4:case"end":return t.stop()}},t,e)}))()},methods:{createGroup:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/ensureLogin");case 2:e.$store.commit("group/createGroup");case 3:case"end":return t.stop()}},t,e)}))()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s);t.default={name:"User",data:function(){return{user:{}}},created:function(){var e=this;return i()(o.a.mark(function t(){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$route.params.userId,t.next=3,e.$http.get("/g/User/"+n).query({populate:{path:"groups",select:"name"}});case 3:r=t.sent,e.user=r.body;case 5:case"end":return t.stop()}},t,e)}))()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(574),o=n.n(r);t.default={components:{GroupList:o.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n.n(r),s=n(22),i=n(135);t.default={name:"CreateGroup",mixins:[i.a],data:function(){return{formData:{intro:"",name:""},rules:{name:[{min:5,max:20,message:"字数在5-20之间"},{required:!0,message:"不能为空"}],intro:[{min:10,max:150,message:"字数在10-150之间"},{required:!0,message:"不能为空"}]}}},computed:o()({},n.i(s.a)("group/",["creatingGroup"])),methods:o()({},n.i(s.b)("group/",["createGroupDone","cancelCreateGroup"]),{createGroupNow:function(){var e=this;this.$refs.form.validate(function(t){if(t){var n=e.$store.state.user,r=n.name,o=n._id,s=n.figureUrl,i=e.formData,a=i.name,u=i.intro;e.$http.post("/g/Group").send({name:a,intro:u,creator:o}).then(function(t){var n=t.body;n.creator={_id:o,name:r,figureUrl:s},e.createGroupDone(n),e.$store.dispatch("user/subscrGroup",n._id),console.log(e),e.publishPost({html:"<p>"+u+"</p>",creator:n.creator,ts:0,groupId:n._id,type:"资料"}),e.formData={intro:"",name:""}},function(t){e.$message("哎呀, 服务器出问题了...")})}})}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n.n(r),s=n(22);t.default={data:function(){return{url:"https://graph.qq.com/oauth2.0/authorize?client_id=100477447&response_type=token&scope=get_user_info&redirect_uri=http%3A%2F%2Fwww.jymao.com%2Fqq-login-ok.html?proxy="+location.host+"%2Fproxy.html",iframeInitName:"loginStart"}},methods:o()({},n.i(s.b)("user/",["cancelLogin"]),n.i(s.c)("user/",["loginOnServer"]),{startCheck:function(){function e(){setTimeout(function(){try{var o=t.contentWindow.name;console.log("name:",o)}catch(t){return void setTimeout(e,200)}if(n!==o){var s=JSON.parse(o);console.log("info:",s),r.loginOnServer(s)}else e()},200)}-1==this.$route.fullPath.indexOf("/login")&&window.localStorage.setItem("lastPath",this.$route.fullPath);var t=this.$refs.loginFrame,n=this.iframeInitName;e();var r=this}}),computed:{needLogin:function(){var e=this.$store.state.user,t=e.hasLogin,n=e.needLogin;return!t&&n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n.n(r),s=n(22);t.default={data:function(){return{formData:{name:this.$store.state.user.nickname,intro:""},rules:{name:[,{required:!0,message:"不能为空"},{pattern:new RegExp("^[\\u4e00-\\u9fa5_a-zA-Z0-9]+$"),message:"字符必须是: 中文, 英文, 数字, 下划线"}],intro:[{}]}}},methods:o()({},n.i(s.b)("user/",["cancelRegister"]),n.i(s.c)("user/",["registerOnServer"]),{registerNow:function(){var e=this;this.$refs.form.validate(function(t){t&&e.registerOnServer(e.formData)})}}),computed:{needRegister:function(){return this.$store.state.user.needRegister}},watch:{"$store.state.user.nickname":function(){this.formData.name=this.$store.state.user.nickname}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s);t.default={data:function(){return{showMenu:!1}},computed:{hasLogin:function(){return this.$store.state.user.hasLogin}},methods:{toggleSidebar:function(){this.showMenu=!this.showMenu},logout:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/logout");case 2:e.$store.commit("user/logout");case 3:case"end":return t.stop()}},t,e)}))()},login:function(){this.$store.commit("user/loginNow")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(582),o=n.n(r),s=n(246),i=n(583),a=n.n(i);t.default={components:{InsertImage:o.a,Emoji:a.a},props:{value:String,placeholder:String,defaultType:String,needCancelBtn:Boolean},watch:{value:function(){this.$refs.editArea.innerHTML=this.value},type:function(){this.$emit("typeChanged",this.type)}},data:function(){return{usedTime:0,dragOver:!1,editArea:null,placeholders:{"短笔记":"写短笔记, 用自己的话把学到的表达出来","提问":"学习中遇到想不通的, 可以在这里提问. (请准确描述问题)"},types:["短笔记","提问"],type:this.defaultType||"短笔记",focused:!1,inCodeMode:!1,cmds:[{icon:"smile-o",ref:"emojiBtn",handler:function(){console.log(this),this.$refs.emoji.toggle(this.$refs.emojiBtn[0].$el)}},{icon:"code",handler:function(e){this.editArea.enterCodeMode(),this.inCodeMode=!0},isHidden:function(){return this.inCodeMode}},{icon:"code",type:"success",handler:function(){this.editArea.leaveCodeMode(),this.inCodeMode=!1},style:{},isHidden:function(){return!this.inCodeMode}},{icon:"picture-o",ref:"insertImageBtn",handler:function(e,t){this.$refs.insertImage.toggle(this.$refs.insertImageBtn[0].$el)}}]}},methods:{recordUsedTime:function(){this.$refs.editArea.textContent.trim().length},onEmojiSelected:function(e){console.log(e),this.editArea.insertHTML(e)},isHidden:function(e){return e.isHidden&&e.isHidden.call(this,e)},handleCmd:function(e,t){e.handler&&e.handler.call(this,e,t)},update:function(e){},format:function(){var e=this.$refs.editArea;e.innerHTML},publish:function(){if(!this.$refs.editArea.textContent.trim())return void this.$message("同学, 你还没有输入内容呢!");var e=this.$refs.editArea.innerHTML.trim();this.$emit("input",e)},go:function(){},onEnter:function(e){console.log(e),e.ctrl||this.editArea.onEnter(e)},enterCodeMode:function(){this.editArea.enterCodeMode()},onKeyupCtrl:function(e){e.key},onDrop:function(e){this.dragOver=!1,this.$refs.insertImage.uploadFiles(e.dataTransfer.files)}},mounted:function(){this.editArea=new s.a(this.$refs.editArea,this.$refs.insertImage)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s);t.default={data:function(){return{uploadProgress:0}},props:["editArea"],methods:{toggle:function(e){var t=this.$refs.popover;t.$refs.reference=e,t.doToggle()},uploadFiles:function(e){var t=this;return i()(o.a.mark(function n(){var r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<e.length)){n.next=7;break}return n.next=4,t.uploadAsync(e[r]);case 4:r++,n.next=1;break;case 7:case"end":return n.stop()}},n,t)}))()},uploadAsync:function(e){var t=this;return i()(o.a.mark(function n(){var r,s,i,a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.size>3145728)){n.next=3;break}return t.$message("图片必须小于3M"),n.abrupt("return");case 3:return r=t.$loading({target:t.editArea.txtEle}),n.next=6,t.$http.get("/qiniu/uptoken");case 6:return s=n.sent,i=s&&s.body.token,n.next=10,t.$http.post("http://upload.qiniu.com/").field("token",i).attach("file",e).on("progress",function(e){t.uploadProgress=e.percent,console.log("uploading:"+e.percent+"%")});case 10:s=n.sent,a="http://i1.jymao.com/"+s.body.key,console.log("url:",a),t.editArea.insertImgLink(a),r.close();case 15:case"end":return n.stop()}},n,t)}))()}}}},function(e,t,n){"use strict";function r(){return s()(i.a).map(function(e){return"/static/emoji/"+e})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(253),s=n.n(o),i=n(247);t.default={data:function(){return{emojiList:r()}},methods:{toHtml:function(e){return'<img src="'+e+'" data-emoji/>'},toggle:function(e){var t=this.$refs.popover;t.$refs.reference=e,t.doToggle()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(186),o=n.n(r);t.default={components:{EditorPosts:o.a},props:["groupInfo"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s),a=n(25),u=n.n(a),c=n(186),l=n.n(c),p=n(22);t.default={components:{EditorPosts:l.a},props:["groupInfo"],data:function(){return{newCnt:"",newPost:{},postTypeBySelect:""}},computed:u()({},n.i(p.d)("user/",["progressTS"]),{postType:function(){return this.postTypeBySelect?this.postTypeBySelect:"短笔记"}}),watch:{newCnt:function(){var e=this;return i()(o.a.mark(function t(){var n,r,s,i,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("newCnt"),e.newCnt){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$store.dispatch("user/ensureLogin");case 5:n=e.groupInfo._id,r=e.$store.state.user,s=r.name,i=r.figureUrl,a=r._id,e.$http.post("/g/Post").send({html:e.newCnt,creator:a,creatorName:s,creatorFigureUrl:i,ts:e.progressTS,longTS:1001*e.progressTS+Math.floor(999*Math.random()),groups:[n],type:e.postType||"短笔记"}).then(function(t){e.newCnt="",e.newPost=t.body},function(e){});case 8:case"end":return t.stop()}},t,e)}))()}},methods:{typeChanged:function(e){this.postTypeBySelect=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s),a=n(25),u=n.n(a),c=n(22),l=n(591),p=n.n(l),f=n(589),d=n.n(f);t.default={name:"Group",components:{ReviewPopover:p.a,Members:d.a},data:function(){return{activeName:this.$route.name,groupInfo:{}}},watch:{"$route.name":function(){this.activeName=this.$route.name},activeName:function(){this.$router.push({name:this.activeName})}},computed:u()({id:function(){return this.$route.params.groupId||this.groupInfo._id}},n.i(c.d)("user/",["progress","totalTS","progressTS"]),{curGroup:function(){return this.getGroupById(this.id)}}),methods:u()({},n.i(c.c)("group/",["getGroupById"]),{fetchGroupInfo:function(){var e=this;this.id&&this.$http.get("/g/Group/"+this.id).query({populate:{path:"creator",fields:"name figureUrl"}}).then(function(t){e.groupInfo=t.body,e.$store.commit("curGroup",e.groupInfo)})},setProgressTS:function(e){this.$store.dispatch("user/setProgressTS",e),setTimeout(function(){$$vm.$emit("resetProgressTS")},10)}}),created:function(){var e=this;return i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.curGroup;case 2:n=t.sent,n||e.fetchGroupInfo(),e.groupInfo=n||{_id:e.id},e.$store.commit("curGroup",e.groupInfo);case 6:case"end":return t.stop()}},t,e)}))()},mounted:function(){var e=this,t=Math.floor(30*Math.random()+30);this.timer=setInterval(function(){e.groupInfo._id&&(e.$store.dispatch("user/incrProgressTS"),!e.progressTS%t&&(e.$store.dispatch("user/saveProgress"),console.log("save")))},1e3)},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.timer=null,this.$store.dispatch("user/saveProgress",this.id),this.$store.commit("curGroup",{})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s),a=n(25),u=n.n(a),c=n(592),l=n.n(c),p=n(590),f=n.n(p),d=n(135),m=n(22);t.default={mixins:[d.a],components:{TimelinePosts:l.a,NewestPosts:f.a},props:["groupInfo","compName"],data:function(){return{newCnt:"",newPost:{},postTypeBySelect:""}},computed:u()({},n.i(m.d)("user/",["progressTS"]),{postType:function(){return this.postTypeBySelect?this.postTypeBySelect:"短笔记"}}),watch:{newCnt:function(){var e=this;return i()(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("newCnt"),e.newCnt){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$store.dispatch("user/ensureLogin");case 5:return n=e.groupInfo._id,t.next=8,e.publishPost({html:e.newCnt,creator:e.$store.state.user,ts:e.progressTS,groupId:n,type:e.postType||"短笔记"});case 8:e.newPost=t.sent,e.newCnt="";case 10:case"end":return t.stop()}},t,e)}))()}},methods:{typeChanged:function(e){this.postTypeBySelect=e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(54),i=n.n(s),a=n(15),u=n.n(a),c=n(25),l=n.n(c),p=n(22);t.default={data:function(){return{members:[]}},computed:l()({},n.i(p.a)(["curGroup"]),n.i(p.d)("user/",["uid"]),{hasJoin:function(){var e=this.curGroup&&this.curGroup.members;return this.uid&&e&&-1!=e.indexOf(this.uid)},isCreator:function(){return this.curGroup.creator._id===this.uid}}),watch:{curGroup:function(){console.log("curGroup changed"),this.fetchMembers()}},methods:l()({},n.i(p.c)("user/",["subscrGroup","quitGroup","ensureLogin"]),{fetchMembers:function(){var e=this;return u()(o.a.mark(function t(){var n,r,s,a,u,c,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.curGroup)||!n.members){t.next=13;break}return r=e.curGroup.members,t.next=5,e.$http.get("/g/User").query({ids:r,select:"name figureUrl status"});case 5:s=t.sent,a=s.body,u=e.curGroup.creator,c=u._id,l=a.findIndex(function(e){return e._id===c}),-1!=l&&a.splice(l,1),a.unshift(i()({groupRole:"creator"},u)),e.members=a;case 13:case"end":return t.stop()}},t,e)}))()},join:function(){var e=this;return u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("join"),t.next=3,e.ensureLogin();case 3:return console.log("login"),t.next=6,e.subscrGroup(e.curGroup._id);case 6:console.log("subscrGroup");case 7:case"end":return t.stop()}},t,e)}))()},quit:function(){var e=this;return u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ensureLogin();case 2:if(!e.isCreator){t.next=5;break}return e.$message({message:"你是此同学会的发起人, 发起人还不能退出",type:"warning"}),t.abrupt("return");case 5:return t.next=7,e.quitGroup(e.curGroup._id);case 7:case"end":return t.stop()}},t,e)}))()}}),mounted:function(){var e=this;return u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchMembers();case 1:case"end":return t.stop()}},t,e)}))()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54),o=n.n(r),s=n(16),i=n.n(s),a=n(15),u=n.n(a),c=n(25),l=n.n(c),p=n(70),f=n.n(p),d=n(71),m=n.n(d),h=n(72),g=n.n(h),v=n(187),_=n.n(v),y=n(22),b=function(){function e(t){m()(this,e),this.options=t,this._fetching=!1}return g()(e,[{key:"fetch",value:function(){var e=this;if(this.isDone)return f.a.resolve([]);var t=this.options,n=t.$vm,r=(t.$cmp,t.sortField);t.boundaryTS;return n.groupId?(this._fetching=!0,console.log("fetch begin"),n.$http.get("/g/Post").query({condition:{groups:n.groupId},sortField:r,limit:n.batchSize}).then(function(t){var r=t.body;return e.options.boundaryTS=r&&r.length&&r[r.length-1].longTS,e.isDone=r.length<n.batchSize,e._fetching=!1,console.log("fetch done"),f.a.resolve(t.body)})):(this.isDone=!0,f.a.resolve([]))}},{key:"hasDone",value:function(){return this.isDone}},{key:"isFetching",value:function(){return this._fetching}}]),e}();t.default={components:{Post:_.a},props:["groupId","newPost"],data:function(){return{historyList:[],batchSize:6}},computed:l()({},n.i(y.d)("user/",["progressTS"])),methods:{fetchMore:function(e){var t=this;return u()(i.a.mark(function n(){var r,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t[e+"Fetcher"],!r.hasDone()&&!r.isFetching()){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.fetch();case 5:o=n.sent,t[e+"List"]=t[e+"List"].concat(o);case 7:case"end":return n.stop()}},n,t)}))()},localeDateStr:function(e){return new Date(e).toLocaleString()},onScroll:function(e){},initFetchers:function(){console.log("progressTS",this.progressTS),this.historyFetcher=new b({$vm:this,$cmp:"$lt",sortField:{createdAt:-1}}),this.fetchMore("history")},reset:function(){console.log("reset"),o()(this.$data,this.$options.data()),this.initFetchers()},onAfterEnter:function(){this.needSetProgressTS&&this.newProgressTS>=0&&(this.$store.dispatch("user/setProgressTS",this.newProgressTS),this.needSetProgressTS=!1,this.newProgressTS=-1)}},watch:{newPost:function(){this.historyList.unshift(this.newPost)}},created:function(){this.initFetchers()},mounted:function(){}}},function(e,t,n){"use strict";function r(e){console.log("transfrom:",e);var t=e.split(":"),n=parseInt(t[0])||0,r=parseInt(t[1])||0,o=parseInt(t[2])||0;return 60*n*60+60*r+o}Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{progressTS:this.value,model:{ts:this.formatTS(this.value)},rules:{ts:[{required:!0,message:"不能为空"},{type:"number",transform:function(e){return r(e)},min:0,max:this.value,message:"起始时间点不能超过当前进度"}]}}},props:["value"],methods:{submit:function(){this.$emit("input",r(this.model.ts))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var r=n(54),o=n.n(r),s=n(16),i=n.n(s),a=n(15),u=n.n(a),c=n(25),l=n.n(c),p=n(95),f=n.n(p),d=n(70),m=n.n(d),h=n(71),g=n.n(h),v=n(72),_=n.n(v),y=n(187),b=n.n(y),w=n(22),x=function(){function e(t){g()(this,e),this.options=t,this._fetching=!1}return _()(e,[{key:"fetch",value:function(){var e=this;if(this.isDone)return m.a.resolve([]);var t=this.options,n=t.$vm,r=t.$cmp,o=t.sortField,s=t.boundaryTS;return n.groupId?(this._fetching=!0,console.log("fetch begin"),n.$http.get("/g/Post").query({condition:{groups:n.groupId,longTS:f()({},r,s)},sortField:o,limit:n.batchSize}).then(function(t){var r=t.body;return e.options.boundaryTS=r&&r.length&&r[r.length-1].longTS,e.isDone=r.length<n.batchSize,e._fetching=!1,console.log("fetch done"),m.a.resolve(t.body)})):(this.isDone=!0,m.a.resolve([]))}},{key:"hasDone",value:function(){return this.isDone}},{key:"isFetching",value:function(){return this._fetching}}]),e}();t.default={components:{Post:b.a},props:["groupId","newPost"],data:function(){return{historyList:[],futureList:[],pendingPost:null,batchSize:6,enableAni:!1,needSetProgressTS:!1,newProgressTS:-1}},computed:l()({},n.i(w.d)("user/",["progressTS"])),methods:{fetchMore:function(e){var t=this;return u()(i.a.mark(function n(){var r,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t[e+"Fetcher"],!r.hasDone()&&!r.isFetching()){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.fetch();case 5:o=n.sent,t[e+"List"]=t[e+"List"].concat(o);case 7:case"end":return n.stop()}},n,t)}))()},localeDateStr:function(e){return new Date(e).toLocaleString()},showPendingNow:function(){this.pendingPost.ts>this.progressTS&&(this.needSetProgressTS=!0,this.newProgressTS=this.pendingPost.ts),this.historyList.unshift(this.pendingPost),this.futureList.shift(),this.pendingPost=null},onScroll:function(e){console.log(e)},initFetchers:function(){console.log("progressTS",this.progressTS),this.futureFetcher=new x({$vm:this,$cmp:"$gt",sortField:{longTS:1},boundaryTS:1e3*this.progressTS}),this.historyFetcher=new x({$vm:this,$cmp:"$lt",sortField:{longTS:-1},boundaryTS:1e3*this.progressTS}),this.fetchMore("future"),this.fetchMore("history")},reset:function(){console.log("reset"),o()(this.$data,this.$options.data()),this.initFetchers()},onAfterEnter:function(){this.needSetProgressTS&&this.newProgressTS>=0&&(this.$store.dispatch("user/setProgressTS",this.newProgressTS),this.needSetProgressTS=!1,this.newProgressTS=-1)}},watch:{newPost:function(){this.historyList.unshift(this.newPost)},progressTS:function(){this.futureList.length<2&&!this.futureFetcher.hasDone()&&(console.log("fetch future ",this.progressTS,new Date),this.fetchMore("future"));var e=this.futureList[0];this.pendingPost=e,e&&this.progressTS>=e.ts&&this.showPendingNow()}},created:function(){this.initFetchers()},mounted:function(){var t=this;e.$$vm.$on("resetProgressTS",function(){return t.reset()})}}}.call(t,n(69))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["cmt"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(185),o=(n.n(r),n(593)),s=n.n(o);t.default={props:["visible","creator","rootPostId"],components:{Comment:s.a},data:function(){return{newCmt:"",cmtList:[]}},watch:{newCmt:function(){var e=this;this.newCmt&&this.$http.post("/g/Comment").send({html:this.newCmt,creator:this.creator._id,root:this.rootPostId,creatorName:this.creator.name}).then(function(t){var n=t.body;e.newCmt="",e.cmtList.unshift(n)})}},created:function(){var e=this;this.$http.get("/g/Comment").query({condition:{root:this.rootPostId}}).then(function(t){e.cmtList=t.body}).catch(function(e){})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=n.n(r),s=n(15),i=n.n(s),a=n(25),u=n.n(a),c=n(594),l=n.n(c),p=n(22);t.default={props:["post","mode"],components:{CommentDialog:l.a},computed:u()({},n.i(p.d)("user",{curUserId:"uid"}),{createdAt:function(){return this.formatDatetime(this.post.createdAt)},ownerOrAdmin:function(){var e=this.curUserId,t=this.post.creator,n=this.$store.state.curGroup.creator;return e===t||e===n},me:function(){var e=this.$store.state.user;return{_id:e._id,name:e.name}},vote:function(){return this.post.votes.up||{}},cmds:function(){console.log("cmds changed");var e=[{label:"赞",num:this.vote.num||0,onClick:function(){var e=this;return i()(o.a.mark(function t(){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("user/ensureLogin");case 3:return t.next=5,e.$http.post("/post/vote-up").send({voter:e.curUserId,postId:e.post._id});case 5:n=t.sent,n.body.n>0?(r=e.vote,r.num++,console.log("curUserId",e.curUserId),r.voters.push(e.curUserId)):e.$message({message:"不能再赞了, 你已经赞过了.",type:"warning"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()}},{label:"评论",num:this.post.numChildren||0,onClick:function(){this.needCommentsBox=!0}}];return this.ownerOrAdmin&&"publish"===this.post.status&&e.push({label:"修改",onClick:function(){this.needModify=!0}},{label:"删除",onClick:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$confirm("确定删除?","提示",{type:"warning"});case 3:return t.prev=3,t.next=6,e.$http.delete("/g/Post/"+e.post._id);case 6:e.$message("删除成功"),e.post.html="<span class='deleted'>内容已被删除</span>",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),e.$message("删除失败.可能服务器出问题了, 请稍后再试试");case 13:t.next=17;break;case 15:t.prev=15,t.t1=t.catch(0);case 17:case"end":return t.stop()}},t,e,[[0,15],[3,10]])}))()}}),e}}),data:function(){return{needCommentsBox:!1,needModify:!1}},methods:{onCmd:function(e){e.onClick&&e.onClick.bind(this)()},updatePost:function(e){var t=this;return i()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$http.post("/g/Post/"+t.post._id).send({html:e});case 2:t.$message("修改成功"),t.post.html=e,t.needModify=!1;case 5:case"end":return n.stop()}},n,t)}))()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95),o=n.n(r);t.default={name:"Timeline",props:{pending:{type:Boolean,default:!1}},computed:{classes:function(){return["ivu-timeline",o()({},"ivu-timeline-pending",this.pending)]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95),o=n.n(r),s="ivu-timeline";t.default={name:"TimelineItem",props:{color:{type:String,default:"blue"}},data:function(){return{dot:!1}},mounted:function(){this.dot=!!this.$refs.dot.innerHTML.length},computed:{itemClasses:function(){return s+"-item"},tailClasses:function(){return s+"-item-tail"},headClasses:function(){var e;return[s+"-item-head",(e={},o()(e,s+"-item-head-custom",this.dot),o()(e,s+"-item-head-"+this.color,this.headColorShow),e)]},headColorShow:function(){return"blue"==this.color||"red"==this.color||"green"==this.color},customColor:function(){var e={};return this.color&&(this.headColorShow||(e={color:this.color,"border-color":this.color})),e},contentClasses:function(){return s+"-item-content"}}}},function(e,t,n){"use strict";var r=n(94),o=n.n(r),s=n(71),i=n.n(s),a=n(72),u=n.n(a),c=function(){function e(t,n){i()(this,e),this.editArea=t,this.uploader=n}return u()(e,[{key:"pasteImage",value:function(e){e&&this.uploader.uploadAsync(e.getAsFile())}},{key:"insertPasteImage",value:function(e){var t=this,n=[],r=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||{},s=r.items;if(!s)return n;o()(s).forEach(function(e){var n=s[e];/image/i.test(n.type)&&t.uploader.uploadAsync(n.getAsFile())})}},{key:"showBase64",value:function(e){var t=new FileReader;t.readAsDataURL(e);var n=this;t.onload=function(){n.insertImgLink(this.result)}}},{key:"insertImgLink",value:function(e){var t=this;if(e){var n=document.createElement("img");n.onload=function(){n=null,t.editArea.insertHTML("<img src='"+e+"' style='max-width:100%' />")},n.onerror=function(){n=null,console.log("error while inserting image:",e)},n.src=e}}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e){var t=void 0;return t=document.createElement("div"),t.innerHTML=e,t.children[0]}function o(e){if(e.remove)e.remove();else{var t=e.parentElement;t&&t.removeChild(e)}}function s(e){document.execCommand("insertHTML",!1,e)}var i=n(94),a=n.n(i),u=n(71),c=n.n(u),l=n(72),p=n.n(l),f=n(245),d=function(){function e(t){c()(this,e),this.txtEle=t,this._currentRange=null}return p()(e,[{key:"getRange",value:function(){return this._currentRange||this.saveRange()||this._currentRange}},{key:"getSelectionContainerElem",value:function(e){e=e||this.getRange();var t=void 0;if(e)return t=e.commonAncestorContainer,1===t.nodeType?t:t.parentNode}},{key:"saveRange",value:function(e){if(e)return void(this._currentRange=e);var t=window.getSelection();if(0!==t.rangeCount){var n=t.getRangeAt(0),r=this.getSelectionContainerElem(n);if(r){this.txtEle.contains(r)&&(this._currentRange=n)}}}},{key:"createRangeByElem",value:function(e,t,n){if(e){var r=document.createRange();n?r.selectNodeContents(e):r.selectNode(e),"boolean"==typeof t&&r.collapse(t),this.saveRange(r),this.restoreSelection()}}},{key:"restoreSelection",value:function(){var e=window.getSelection();e.removeAllRanges(),e.addRange(this._currentRange)}}]),e}(),m=function(){function e(t,n){c()(this,e),this.txtEle=t,this.selection=new d(t),this.imageHandler=new f.a(this,n)}return p()(e,[{key:"onEnter",value:function(e){var t=this.selection.getSelectionContainerElem();if("code"===t.nodeName.toLowerCase())return void this.insertHTML("\n");var n=t.parentNode;if(n!==this.txtEle)return void console.log("not top level node");var o,s=t.nodeName.toLowerCase();switch(s){case"p":o=r("<p><br/></p>")}o&&n.insertBefore(o,t.nextSibling),this.selection.createRangeByElem(o,!0)}},{key:"addNewline",value:function(){switch(this.selection.getSelectionContainerElem().nodeName.toLowerCase()){case"code":case"pre":this.insertHTML("\n");break;case"p":case"div":var e=this.selection.getRange();console.log("range:",this.selection.getRange());var t=e.commonAncestorContainer,n=t.length||t.children&&t.children.length;if(e.endOffset<n)return!1;this._addNewNode("<p><br></p>",!0);break;default:return!1}return!0}},{key:"initNewline",value:function(){this.txtEle.innerHTML.length||s("<p><br/></p>")}},{key:"_addNewNode",value:function(e,t){var n=this.selection.getSelectionContainerElem();if(n){var s=r(e),i=!1;n=this.getLevel2(n),t||n.textContent||(i=!0);var a=n.nextSibling;this.txtEle.insertBefore(s,a),this.selection.createRangeByElem(s,!0),i&&o(n),this.txtEle.focus()}}},{key:"enterCodeMode",value:function(){this._addNewNode("<pre><code><br></code></pre>")}},{key:"getLevel2",value:function(e){if(!this.txtEle.contains(e)||this.txtEle===e){var t=this.selection.getRange().startOffset;if(t<this.txtEle.children.length){return this.txtEle.children[t]}return{nextSibling:null}}for(var n=e.parentNode;n&&n!=this.txtEle;)e=n,n=n.parentNode;return e}},{key:"leaveCodeMode",value:function(){this._addNewNode("<p><br></p>")}},{key:"insertHTML",value:function(e){this.txtEle.focus();var t=this.selection.getRange(),n=t.startOffset,r=t.commonAncestorContainer;s(e),this.selection.saveRange();var o=this.selection.getRange();o.startOffset===n&&o.commonAncestorContainer===r&&s(e)}},{key:"pasteImage",value:function(e){this.imageHandler.insertPasteImage(e)}},{key:"insertImgLink",value:function(e){this.imageHandler.insertImgLink(e)}},{key:"execCmd",value:function(e,t){document.execCommand(e,!1,t)}},{key:"paste",value:function(e){var t=this,n=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||{},r=n.items;r&&a()(r).forEach(function(n){var o=r[n],s=o.type;/image/i.test(s)?t.imageHandler.pasteImage(o):/html/i.test(s)&&(t.pasteHTML(o),e.preventDefault())})}},{key:"pasteHTML",value:function(e){var t=this;e.getAsString(function(e){console.log(e);var n=e.split("</html>");2===n.length&&(e=n[0]),e=e.replace(/<(meta|script|link).+?>/gim,"").replace(/\s?(class|style)=('|").+?('|")/gim,""),console.log(e),t.insertHTML(e)})}}]),e}();t.a=m},function(e,t,n){"use strict";t.a={":smile:":"smile.png",":laughing:":"laughing.png",":blush:":"blush.png",":relaxed:":"relaxed.png",":smirk:":"smirk.png",":heart_eyes:":"heart_eyes.png",":kissing_closed_eyes:":"kissing_closed_eyes.png",":flushed:":"flushed.png",":relieved:":"relieved.png",":wink:":"wink.png",":stuck_out_tongue_winking_eye:":"stuck_out_tongue_winking_eye.png",":stuck_out_tongue_closed_eyes:":"stuck_out_tongue_closed_eyes.png",":kissing_smiling_eyes:":"kissing_smiling_eyes.png",":stuck_out_tongue:":"stuck_out_tongue.png",":sleeping:":"sleeping.png",":worried:":"worried.png",":frowning:":"frowning.png",":open_mouth:":"open_mouth.png",":grimacing:":"grimacing.png",":confused:":"confused.png",":hushed:":"hushed.png",":expressionless:":"expressionless.png",":unamused:":"unamused.png",":sweat_smile:":"sweat_smile.png",":sweat:":"sweat.png",":disappointed_relieved:":"disappointed_relieved.png",":weary:":"weary.png",":pensive:":"pensive.png",":disappointed:":"disappointed.png",":confounded:":"confounded.png",":cry:":"cry.png",":sob:":"sob.png",":joy:":"joy.png",":astonished:":"astonished.png",":scream:":"scream.png",":tired_face:":"tired_face.png",":angry:":"angry.png",":rage:":"rage.png",":sleepy:":"sleepy.png",":yum:":"yum.png",":mask:":"mask.png",":sunglasses:":"sunglasses.png",":smiling_imp:":"smiling_imp.png",":neutral_face:":"neutral_face.png",":innocent:":"innocent.png",":alien:":"alien.png",":heart:":"heart.png",":green_heart:":"green_heart.png",":broken_heart:":"broken_heart.png",":star:":"star.png",":boom:":"boom.png",":exclamation:":"exclamation.png",":question:":"question.png",":shit:":"shit.png",":thumbsup:":"thumbsup.png",":thumbsdown:":"thumbsdown.png",":ok_hand:":"ok_hand.png",":punch:":"punch.png",":fist:":"fist.png",":v:":"v.png",":rice:":"rice.png",":ear_of_rice:":"ear_of_rice.png",":tea:":"tea.png"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(193),o=(n.n(r),n(12)),s=n(190),i=n(188),a=n(194),u=n.n(a),c=n(195),l=n.n(c),p=n(191),f=n(189),d=n(192);window.$store=s.a,o.default.use(i.a),o.default.use(l.a,{baseUrl:"http://chip.jymao.com:8101/ds"}),o.default.superagent.use(n.i(p.a)(["qiniu.com"])),o.default.directive("focus",{inserted:function(e){e.focus()}}),o.default.prototype.$utils=d.a;var m=new o.default({store:s.a,router:f.a,el:"#app",render:function(e){return e(u.a)},data:{message:"i am msg from main",obj:{a:1}},methods:{},beforeCreate:function(){window.$$vm=this,console.log("create event")}});console.log("vm created"),window.$$vm=m},function(e,t,n){"use strict";t.a={namespaced:!0,state:{creatingGroup:!1,groupList:[]},getters:{},mutations:{createGroup:function(e){e.creatingGroup=!0},createGroupDone:function(e,t){e.creatingGroup=!1,e.groupList.unshift(t)},cancelCreateGroup:function(e){e.creatingGroup=!1},setGroupList:function(e,t){e.groupList=t},setGroupMembers:function(e,t){var n=t.groupId,r=t.members;e.groupList.forEach(function(e){n==e._id&&(e.members=r)})}},actions:{loadGroupList:function(e){var t=(e.state,e.commit);return $$vm.$http.get("/g/Group").query({limit:1e3,populate:{path:"creator",select:"name figureUrl"},sortField:{countMembers:-1}}).then(function(e){t("setGroupList",e.body)},function(e){console.error(e)})},getGroupById:function(e,t){var n=e.state;console.log(n,t);var r=n.groupList.find(function(e){return e._id===+t});return console.log("group:",r),r},setGroupMembers:function(e,t){var n=e.commit,r=e.rootState,o=t.groupId,s=t.members;n("setGroupMembers",{groupId:o,members:s}),console.log("arguments",arguments);var i=r.curGroup;i&&i._id===o&&n("setCurGroupMember",s,{root:!0})}}}},function(e,t,n){"use strict";var r=n(70),o=n.n(r),s=n(16),i=n.n(s),a=n(15),u=n.n(a),c=n(252),l=n.n(c),p=n(54),f=n.n(p),d={hasLogin:!1,needLogin:!1,needRegister:!1,name:"",groups:[],progresses:{},nickname:"",_id:0};t.a={namespaced:!0,state:f()({},d),getters:{uid:function(e){return e._id},localStoreName:function(e){return e.hasLogin?"userInfo":"visitorInfo"},progress:function(e,t,n,r){var o=r.curGroupId;return o&&e.progresses[o]},totalTS:function(e,t){return t.progress&&t.progress.totalTS||0},progressTS:function(e,t){return t.progress&&t.progress.ts||0}},mutations:{save:function(e,t){window.localStorage.setItem(t,l()(e))},load:function(e,t){f()(e,t)},loginNow:function(e){e.needLogin=!0},loginDone:function(e){e.needLogin=!1},cancelLogin:function(e){e.needLogin=!1},hasLogin:function(e){e.needLogin=!1,e.hasLogin=!0},logout:function(e){for(var t in e)e[t]=null;f()(e,d),console.log(e),window.localStorage.removeItem("userInfo"),$$vm.$message({message:"注销成功",type:"success"})},subscrGroup:function(e,t){var n=t.groups,r=t.localStoreName;e.groups=n,window.localStorage.setItem(r,l()(e))},quitGroup:function(e,t){var n=t.groupId,r=t.groups,o=t.localStoreName;e.groups=r,e.progresses[n]=null,window.localStorage.setItem(o,l()(e))},newUser:function(e,t){e.needRegister=!0,e.needLogin=!1,e.nickname=t},registerDone:function(e){e.needRegister=!1},cancelRegister:function(e){e.needRegister=!1},addProgress:function(e,t){$$vm.$set(e.progresses,t,{totalTS:0,ts:0})},setProgressTS:function(e,t){var n=t.ts,r=t.groupId;e.progresses[r].ts=n},incrProgress:function(e,t){var n=e.progresses[t];n.ts++,n.totalTS++}},actions:{loadUser:function(e,t){var n=this,r=e.commit,o=e.getters;return u()(i.a.mark(function e(){var s,a,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.localStoreName,a=JSON.parse(window.localStorage.getItem(s)),a&&r("load",a),e.next=5,t.get("/self");case 5:u=e.sent,a=u&&u.body&&u.body.user,a&&(r("load",u.body.user),r("save",s));case 8:case"end":return e.stop()}},e,n)}))()},ensureLogin:function(e){var t=e.state,n=e.commit;return new o.a(function(e,r){if(t.hasLogin)return void e(!0);n("loginNow"),$$vm.$store.watch(function(e){return e.user.hasLogin},function(){e(!0)})})},loginOnServer:function(e,t){var n=this,r=(e.state,e.commit),o=e.getters;return u()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$$vm.$http.post("/login").send(t);case 2:s=e.sent,a=s.body,e.t0=a.status,e.next="newUser"===e.t0?7:"ok"===e.t0?9:14;break;case 7:return r("newUser",a.nickname),e.abrupt("break",16);case 9:return r("hasLogin"),r("load",a.user),r("save",o.localStoreName),$$vm.$message({message:"登录成功",type:"success"}),e.abrupt("break",16);case 14:return $$vm.$message("哎呀, 服务器出问题了..."),e.abrupt("break",16);case 16:case"end":return e.stop()}},e,n)}))()},registerOnServer:function(e,t){var n=this,r=(e.state,e.commit),o=e.getters;return u()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$$vm.$http.post("/register").send(t);case 2:s=e.sent,a=s.body,e.t0=a.status,e.next="ok"===e.t0?7:12;break;case 7:return r("registerDone"),r("hasLogin"),r("load",a.user),r("save",o.localStoreName),e.abrupt("break",14);case 12:return $$vm.$message("注册失败.可能服务器出问题了..."),e.abrupt("break",14);case 14:case"end":return e.stop()}},e,n)}))()},saveProgress:function(e,t){var n=this,r=e.state,o=e.commit,s=e.getters;return u()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o("save",s.localStoreName),!(a=r.progresses[t])||!r.hasLogin){e.next=5;break}return e.next=5,$$vm.$http.post("/user/progress").send({groupId:t,progress:a});case 5:case"end":return e.stop()}},e,n)}))()},subscrGroup:function(e,t){var n=this,r=e.state,o=e.commit,s=e.dispatch,a=e.getters;return u()(i.a.mark(function e(){var u,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.hasLogin){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$$vm.$http.post("/user/joinGroup").send({groupId:t});case 4:return u=e.sent,c=u.body,o("subscrGroup",{groups:c.groups,localStoreName:l}),e.next=9,s("group/setGroupMembers",{groupId:t,members:c.members},{root:!0});case 9:l=a.localStoreName,o("save",l);case 11:case"end":return e.stop()}},e,n)}))()},quitGroup:function(e,t){var n=this,r=e.state,o=e.commit,s=e.dispatch,a=(e.rootState,e.getters);return u()(i.a.mark(function e(){var u,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!=r.groups.indexOf(t)&&r.hasLogin){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$$vm.$http.post("/user/quitGroup").send({groupId:t});case 4:return u=e.sent,c=u.body,o("quitGroup",{groupId:t,groups:c.groups}),e.next=9,s("group/setGroupMembers",{groupId:t,members:c.members},{root:!0});case 9:l=a.localStoreName,o("save",l);case 11:case"end":return e.stop()}},e,n)}))()},ensureProgress:function(e){var t=this,n=(e.state,e.commit),r=e.getters,s=e.rootGetters;return u()(i.a.mark(function e(){var a,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.curGroupId){e.next=3;break}return e.abrupt("return",o.a.reject(new Error("no current groupd Id")));case 3:return r.progress||n("addProgress",a),u=r.progress,u.progressTS&&($$vm.$set(u,"ts",u.progressTS),delete u.progressTS),e.abrupt("return",o.a.resolve(r.progress));case 7:case"end":return e.stop()}},e,t)}))()},incrProgressTS:function(e){var t=this,n=(e.state,e.getters,e.dispatch),r=e.commit,o=e.rootGetters;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("ensureProgress");case 2:r("incrProgress",o.curGroupId);case 3:case"end":return e.stop()}},e,t)}))()},setProgressTS:function(e,t){var n=this,r=(e.state,e.commit),o=e.dispatch,s=e.rootGetters;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("ensureProgress");case 2:r("setProgressTS",{ts:t,groupId:s.curGroupId});case 3:case"end":return e.stop()}},e,n)}))()}}}},function(e,t,n){"use strict";t.a={validNameChar:{pattern:new RegExp("^[\\u4e00-\\u9fa5_a-zA-Z0-9]+$"),message:"字符必须是: 中文, 英文, 数字, 下划线"}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,function(e,t,n){function r(e){n(542)}var o=n(4)(n(219),n(607),r,"data-v-42dfe380",null);e.exports=o.exports},function(e,t,n){var r=n(4)(n(220),n(612),null,null,null);e.exports=r.exports},function(e,t,n){var r=n(4)(n(221),n(614),null,null,null);e.exports=r.exports},function(e,t,n){function r(e){n(546)}var o=n(4)(n(222),n(613),r,null,null);e.exports=o.exports},function(e,t,n){var r=n(4)(n(223),n(624),null,null,null);e.exports=r.exports},function(e,t,n){function r(e){n(533)}var o=n(4)(n(224),n(599),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(541)}var o=n(4)(n(225),n(605),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(543)}var o=n(4)(n(226),n(608),r,"data-v-477498c5",null);e.exports=o.exports},function(e,t,n){var r=n(4)(n(228),n(611),null,null,null);e.exports=r.exports},function(e,t,n){function r(e){n(539)}var o=n(4)(n(229),n(603),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(544)}var o=n(4)(n(230),n(609),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(547)}var o=n(4)(n(231),n(615),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(552)}var o=n(4)(n(232),n(621),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(550)}var o=n(4)(n(233),n(619),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(553)}var o=n(4)(n(234),n(622),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(536)}var o=n(4)(n(236),n(601),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(549)}var o=n(4)(n(237),n(618),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(532)}var o=n(4)(n(238),n(598),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(548)}var o=n(4)(n(239),n(616),r,null,null);e.exports=o.exports},function(e,t,n){var r=n(4)(n(240),n(617),null,null,null);e.exports=r.exports},function(e,t,n){function r(e){n(531)}var o=n(4)(n(241),n(597),r,null,null);e.exports=o.exports},function(e,t,n){function r(e){n(554)}var o=n(4)(n(243),n(623),r,null,null);e.exports=o.exports},function(e,t,n){var r=n(4)(n(244),n(606),null,null,null);e.exports=r.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{modal:!0,title:"评论",size:"small",visible:e.visible,beforeClose:function(){return e.$emit("close")}}},[n("div",[n("Editor",{attrs:{placeholder:"写评论"},model:{value:e.newCmt,callback:function(t){e.newCmt=t},expression:"newCmt"}})],1),e._v(" "),n("div",[n("ul",{staticClass:"plain"},e._l(e.cmtList,function(e){return n("li",{staticStyle:{"margin-bottom":"1em"}},[n("Comment",{attrs:{cmt:e}})],1)}))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{ref:"popover",attrs:{trigger:"click"}},[n("div",{staticStyle:{padding:"1rem 0.5rem"}},[n("Form",{attrs:{"label-position":"top",rules:e.rules,model:e.model}},[n("FormItem",{attrs:{label:"设置起始时间点",prop:"ts"}},[n("Input",{attrs:{type:"text"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;t.preventDefault(),e.submit(t)}},model:{value:e.model.ts,callback:function(t){e.model.ts=t},expression:"model.ts"}})],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")])],1)],1)],1),e._v(" "),n("Button",{staticStyle:{border:"none"},attrs:{size:"mini",type:"text"},slot:"reference"},[e._v("复习\n    ")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.needLogin?n("Dialog",{attrs:{visible:e.needLogin,size:"small"},on:{"visible-change":function(t){t||e.cancelLogin()}}},[n("iframe",{ref:"loginFrame",staticClass:"login",attrs:{frameborder:"no",src:e.url,name:e.iframeInitName},on:{load:e.startCheck}})],1):e._e()},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:{focused:e.focused},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27))return null;e.$emit("cancel")}}},[n("div",{directives:[{name:"focus",rawName:"v-focus"}],ref:"editArea",staticClass:"editArea",class:{dragOver:e.dragOver},attrs:{placeholder:e.placeholder||e.placeholders[e.type],contentEditable:"true",spellcheck:"false"},domProps:{innerHTML:e._s(e.value)},on:{keydown:[function(t){e.recordUsedTime(),e.editArea.initNewline()},function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.editArea.addNewline()&&t.preventDefault()},function(t){return("button"in t||!e._k(t.keyCode,"enter",13))&&t.ctrlKey?(t.preventDefault(),void e.publish(t)):null},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9))return null;t.preventDefault(),e.editArea.insertHTML("&nbsp;&nbsp;&nbsp;&nbsp;")}],keyup:[function(t){e.editArea.selection.saveRange()},function(t){if(!t.ctrlKey)return null;e.onKeyupCtrl(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27))return null;e.$refs.editArea.blur()}],paste:function(t){e.editArea.paste(t)},dragover:function(t){t.preventDefault(),e.dragOver=!0},dragleave:function(t){t.preventDefault(),e.dragOver=!1},drop:function(t){t.preventDefault(),e.onDrop(t)},focus:function(t){e.focused=!0},blur:function(t){e.focused=!1}}}),e._v(" "),n("div",{staticClass:"toolbar",staticStyle:{position:"relative"},on:{click:function(t){e.editArea.initNewline()}}},[n("ButtonGroup",{},e._l(e.cmds,function(t,r){return e.isHidden(t)?e._e():n("Button",{key:r,ref:t.ref,refInFor:!0,style:t.style||{border:"none"},attrs:{type:t.type||"plain"},on:{click:function(n){e.handleCmd(t,r)}}},[n("IconFA",{staticStyle:{"box-sizing":"initial"},attrs:{name:t.icon}})],1)})),e._v(" "),e.placeholder?e._e():n("Select",{staticStyle:{width:"6em","margin-left":"2em","vertical-align":"middle"},attrs:{size:"mini"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.types,function(e){return n("Option",{key:e,attrs:{value:e}})})),e._v(" "),n("ul",{staticClass:"list-inline",style:{position:"absolute",right:"1em",top:"0",bottom:"0",margin:0,padding:0}},[e.needCancelBtn?n("li",[n("Button",{attrs:{type:"text"},on:{click:function(t){e.$emit("cancel")}}},[e._v("取消 ESC")])],1):e._e(),e._v(" "),n("li",[n("Button",{attrs:{type:"text"},on:{click:e.publish}},[e._v("发表 Ctrl+Enter")])],1)])],1),e._v(" "),n("InsertImage",{ref:"insertImage",attrs:{editArea:e.editArea}}),e._v(" "),n("Emoji",{ref:"emoji",on:{emojiSelected:function(t){e.editArea.insertHTML(t)}}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"plain list-inline compact"},[e._l(e.members.slice(0,8),function(e){return n("li",[n("router-link",{staticStyle:{width:"2rem",height:"2.2rem"},attrs:{to:"/u/"+e._id}},[n("img",{staticClass:"small-figure",class:{creator:"creator"==e.groupRole},attrs:{src:e.figureUrl,title:e.name}})])],1)}),e._v(" "),this.curGroup.members?n("li",[n("small",[e._v("已有"),n("Tag",{attrs:{type:"success"}},[e._v(e._s(e.members.length))]),e._v("位同学")],1),e._v(" "),e.hasJoin?e._e():n("Button",{attrs:{size:"mini",type:"text"},on:{click:e.join}},[e._v("立即加入")]),e._v(" "),e.hasJoin?n("Button",{attrs:{size:"mini",type:"plain",title:"点击退出同学会"},on:{click:e.quit}},[e._v("\n            已加入\n        ")]):e._e()],1):e._e()],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"font-size":"12px"}},[e.needModify?e._e():n("div",[n("header",[n("router-link",{staticStyle:{"margin-left":"0rem"},attrs:{to:"/u/"+e.post.creator}},[n("img",{staticClass:"mini-figure",attrs:{src:e.post.creatorFigureUrl}}),e._v("\n                "+e._s(e.post.creatorName)+"\n            ")])],1),e._v(" "),n("div",{staticClass:"post-content",staticStyle:{"font-size":"1rem"},domProps:{innerHTML:e._s(e.post.html)}}),e._v(" "),n("footer",{staticStyle:{color:"grey","font-style":"italic","border-bottom":"1px dashed lightgrey"}},[n("span",{staticStyle:{"margin-right":"1em"}},[e._v(e._s(e.createdAt))]),e._v(" "),n("ButtonGroup",e._l(e.cmds,function(t,r){return n("Button",{key:r,staticStyle:{border:"none"},attrs:{size:"small"},on:{click:function(n){e.onCmd(t)}}},[e._v("\n                    "+e._s(t.label)+"\n                    "),isFinite(t.num)?n("span",[e._v("("+e._s(t.num)+")")]):e._e()])}))],1)]),e._v(" "),e.needCommentsBox?n("CommentDialog",{key:e.post._id,attrs:{visible:e.needCommentsBox,creator:e.me,rootPostId:e.post._id},on:{close:function(t){e.needCommentsBox=!1}}}):e._e(),e._v(" "),e.needModify?n("Editor",{attrs:{value:e.post.html,needCancelBtn:!0},on:{input:e.updatePost,cancel:function(t){e.needModify=!1}}}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{ref:"popover",attrs:{placement:"bottom-start","visible-arrow":"true",trigger:"click"}},[n("ul",{staticClass:"list-inline plain"},e._l(e.emojiList,function(t){return n("li",{attrs:{"data-emoji":""},domProps:{innerHTML:e._s(e.toHtml(t))},on:{click:function(n){e.$emit("emojiSelected",e.toHtml(t))}}})}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Editor",{key:"editor",attrs:{defaultType:e.postType},on:{typeChanged:e.typeChanged},model:{value:e.newCnt,callback:function(t){e.newCnt=t},expression:"newCnt"}}),e._v(" "),n(e.compName,{key:e.groupInfo._id,tag:"Component",attrs:{groupId:e.groupInfo._id,newPost:e.newPost}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{title:"欢迎你, 新同学. ",visible:e.needRegister,size:"mini"},on:{"visible-change":function(t){t||e.cancelRegister()}}},[n("Form",{ref:"form",staticStyle:{width:"25rem"},attrs:{labelWidth:"5rem",rules:e.rules,model:e.formData}},[n("FormItem",{attrs:{label:"用户名",prop:"name"}},[n("Input",{attrs:{autofocus:""},model:{value:e.formData.name,callback:function(t){e.formData.name="string"==typeof t?t.trim():t},expression:"formData.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"自我介绍",prop:"intro"}},[n("Input",{attrs:{placeholder:"请简单介绍下自己"},model:{value:e.formData.intro,callback:function(t){e.formData.intro="string"==typeof t?t.trim():t},expression:"formData.intro"}})],1)],1),e._v(" "),n("Button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:e.registerNow}},[e._v("注册")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.itemClasses},[n("div",{class:e.tailClasses}),e._v(" "),n("div",{ref:"dot",class:e.headClasses,style:e.customColor},[e._t("dot")],2),e._v(" "),n("div",{class:e.contentClasses},[e._t("default")],2)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ul",{staticClass:"list-inline group-item header"},[n("li",[n("Input",{attrs:{type:"text",name:"",icon:"search",placeholder:"同学会名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27))return null;e.groupName=""}},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}})],1),e._v(" "),n("li",[n("Input",{attrs:{type:"text",name:"",icon:"search",placeholder:"发起人"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27))return null;e.creatorName=""}},model:{value:e.creatorName,callback:function(t){e.creatorName=t},expression:"creatorName"}})],1),e._v(" "),e._m(0)]),e._v(" "),n("transition-group",{staticClass:"plain",attrs:{tag:"ul",name:"el-zoom-in-top"}},e._l(e.filteredList,function(t){var r=t.name,o=t.creator,s=(t.intro,t._id),i=t.members;return n("li",{key:s},[n("ul",{key:s,staticClass:"list-inline group-item"},[n("li",[n("router-link",{attrs:{to:"/group/"+s,title:r}},[e._v(e._s(r))])],1),e._v(" "),o&&o.name?n("li",[n("router-link",{attrs:{to:"/u/"+o._id}},[n("img",{staticStyle:{"vertical-align":"middle","margin-right":".5rem"},attrs:{src:o.figureUrl,width:"16px",height:"16px"}}),e._v(" "),n("span",{staticStyle:{"vertical-align":"middle"}},[e._v(e._s(o.name))])])],1):e._e(),e._v(" "),i?n("li",{on:{click:function(t){e.$router.push("/group/"+s)}}},[n("Tag",{staticClass:"pull-right",attrs:{type:i.length>1?"success":"grey"}},[e._v(e._s(i.length))])],1):e._e()])])})),e._v(" "),n("footer",[n("Button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:e.createGroup}},[e._v("没有找到你在学习的? 发起一个同学会")])],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("small",{staticClass:"pull-right"},[e._v("同学数")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.showMenu=!1},expression:"()=>showMenu=false"}]},[n("Button",{staticClass:"sidebarBtn",attrs:{type:"text",size:"mini"},on:{click:e.toggleSidebar}},[n("IconFA",{staticStyle:{"box-sizing":"initial"},attrs:{name:"bars"}})],1),e._v(" "),n("div",{staticClass:"sidebar"},[n("transition",{attrs:{name:"slideIn"}},[n("Menu",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],attrs:{theme:"light"}},[n("MenuItem",{attrs:{index:"1"}},[n("router-link",{attrs:{to:"/"}},[e._v("首页")])],1),e._v(" "),e.hasLogin?e._e():n("MenuItem",{attrs:{index:"2"},on:{click:e.login}},[e._v("登录")]),e._v(" "),e.hasLogin?n("MenuItem",{attrs:{index:"3"},on:{click:e.logout}},[e._v("注销")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("EditorPosts",{attrs:{groupInfo:e.groupInfo,compName:"NewestPosts"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("keep-alive",{attrs:{exclude:"Group,User"}},[n("router-view")],1),e._v(" "),n("Login"),e._v(" "),n("Register"),e._v(" "),n("CreateGroup"),e._v(" "),n("Sidebar")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Popover",{ref:"popover",attrs:{placement:"bottom-start","visible-arrow":"true",title:"插入图片的三种方式",trigger:"click"}},[n("ul",{staticStyle:{"padding-left":"2em"}},[n("li",[n("p",[e._v("使用快捷键 Ctrl+V (mac系统: Cmd+V) 从剪切板粘贴图片")])]),e._v(" "),n("li",[n("p",[e._v("拖拽图片文件到编辑框")])]),e._v(" "),n("li",[n("Button",{staticStyle:{width:"100%"},attrs:{type:"plain"},on:{click:function(t){e.$refs.fileInput.click()}}},[e._v("上传图片后自动插入")])],1)])]),e._v(" "),n("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",name:"",accept:"image/png, image/gif, image/jpeg, image/vnd.microsoft.icon",multiple:""},on:{change:function(t){e.uploadFiles(e.$refs.fileInput.files)}}})],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("p",[e._v("I am home")])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"hero"},[n("blockquote",[n("p",[e._v("\n                最好的学习方法就是同学教会同学.\n            ")]),e._v(" "),n("footer",[e._v("— "),n("cite",[e._v("同学会")])])])],1),e._v(" "),n("groupList")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[n("Breadcrumb",[n("BreadcrumbItem",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),n("BreadcrumbItem",[e._v("个人主页")])],1)],1),e._v(" "),n("img",{attrs:{src:e.user.figureUrl100,width:"100px",height:"100px"}}),e._v(" "),n("span",[e._v(e._s(e.user.name))]),e._v(" "),n("span",[e._v(e._s(e.user.gender))]),e._v(" "),n("span",[e._v(e._s(e.user.intro))]),e._v(" "),n("h5",[e._v("同学会")]),e._v(" "),n("ul",e._l(e.user.groups,function(t){return n("li",[n("router-link",{attrs:{to:"/group/"+t._id}},[e._v(e._s(t.name))])],1)}))])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("I am note tree")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Timeline",{attrs:{pending:!0}},[e.pendingPost?n("TimelineItem",{attrs:{color:"grey"}},[n("div",[n("span",[e._v("下一条 "+e._s(e.formatTS(e.pendingPost.ts))+" ("+e._s(e.formatTS(e.pendingPost.ts-e.progressTS))+")")])]),e._v(" "),n("Button",{staticStyle:{"font-size":"1em",width:"100%"},attrs:{type:"plain"},on:{click:function(t){e.showPendingNow()}}},[e._v("\n                    立即显示\n            ")])],1):e._e(),e._v(" "),e.pendingPost?e._e():n("TimelineItem",{attrs:{color:"grey"}},[n("div",[n("span",[e._v(" ")])]),e._v(" "),n("Button",{staticStyle:{"font-size":"1em",width:"100%"},attrs:{disabled:!0,type:"plain"}},[e._v("\n                    立即显示\n            ")])],1),e._v(" "),n("transition-group",{ref:"posts",staticClass:"plain",attrs:{tag:"ul",name:"post"},on:{"after-enter":e.onAfterEnter}},e._l(e.historyList,function(t){return n("TimelineItem",{key:t._id,staticStyle:{position:"relative"},attrs:{"data-id":t._id}},["提问"==t.type?n("IconFA",{staticStyle:{"box-sizing":"initial"},attrs:{color:"red",name:"question-circle"},slot:"dot"}):e._e(),e._v(" "),n("span",{staticStyle:{position:"absolute",left:"-4rem",top:"0"}},[e._v(e._s(e.formatTS(t.ts)))]),e._v(" "),n("Post",{attrs:{post:t}})],1)}))],1),e._v(" "),e.historyFetcher.hasDone()?e._e():n("Button",{staticStyle:{width:"100%"},on:{click:function(t){e.fetchMore("history")}}},[e._v("显示更多")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",staticStyle:{"border-bottom":"1px solid lightgrey"}},[n("div",{staticStyle:{"font-size":"1em","padding-bottom":".2em"},domProps:{innerHTML:e._s(e.cmt.html)}}),e._v(" "),n("footer",{staticStyle:{"font-size":"12px"}},[n("span",{staticStyle:{display:"inline-block"}},[n("a",{attrs:{href:"/u/{cmt.creator}"}},[e._v(e._s(e.cmt.creatorName))])]),e._v(" "),n("span",{staticStyle:{"font-style":"italic","font-color":"lightgrey",float:"right"}},[e._v(e._s(e.formatDatetime(e.cmt.createdAt)))])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("transition-group",{ref:"posts",staticClass:"plain",attrs:{tag:"ul",name:"post"},on:{"after-enter":e.onAfterEnter}},e._l(e.historyList,function(e){return n("li",{key:e._id,staticStyle:{"padding-bottom":"1.8rem"},attrs:{"data-id":e._id}},[n("Post",{attrs:{post:e}})],1)})),e._v(" "),e.historyFetcher.hasDone()?e._e():n("Button",{staticStyle:{width:"100%"},on:{click:function(t){e.fetchMore("history")}}},[e._v("显示更多")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("EditorPosts",{attrs:{groupInfo:e.groupInfo,compName:"TimelinePosts"}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{class:e.clazz,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t){return n("path",e._b({},"path",t))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t){return n("polygon",e._b({},"polygon",t))}):e._e(),e._v("\b\n    "),e.icon&&e.icon.raw?[n("g",{domProps:{innerHTML:e._s(e.icon.raw)}})]:e._e()])],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("I am Questions")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[n("div",{staticClass:"pull-right"},[n("tag",{attrs:{type:""}},[e._v("学习总时长 "+e._s(e.formatTS(e.totalTS))+"\n                "),Math.abs(e.totalTS-e.progressTS)>10?n("span",{staticStyle:{"margin-left":"1em"}},[e._v("进度 "+e._s(e.formatTS(e.progressTS)))]):e._e()]),e._v(" "),e._m(0)],1),e._v(" "),n("Breadcrumb",[n("BreadcrumbItem",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),n("BreadcrumbItem",[e._v(e._s(e.groupInfo.name))])],1)],1),e._v(" "),n("Members"),e._v(" "),n("Tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("tab-pane",{attrs:{label:"时间线",name:"timeline"}}),e._v(" "),n("tab-pane",{attrs:{label:"最新",name:"newest"}})],1),e._v(" "),e.groupInfo._id?n("router-view",{attrs:{groupInfo:e.groupInfo}}):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement;return(e._self._c||t)("ReviewPopover",{attrs:{value:e.progressTS},on:{input:e.setProgressTS}})}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("ul",{class:e.classes},[e._t("default")],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.creatingGroup?n("Dialog",{attrs:{title:"发起同学会",size:"mini",visible:e.creatingGroup},on:{"visible-change":function(t){t||e.cancelCreateGroup()}}},[n("Form",{ref:"form",staticStyle:{"min-width":"25rem"},attrs:{rules:e.rules,model:e.formData}},[n("FormItem",{attrs:{label:"名称",prop:"name"}},[n("Input",{attrs:{placeholder:"例如: 同学《Javascript权威指南》"},model:{value:e.formData.name,callback:function(t){e.formData.name="string"==typeof t?t.trim():t},expression:"formData.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"同学会介绍",prop:"intro"}},[n("Input",{attrs:{type:"textarea",rows:3,placeholder:"学习什么, 为什么学习它, 有什么期望, 等等(150字内)"},model:{value:e.formData.intro,callback:function(t){e.formData.intro="string"==typeof t?t.trim():t},expression:"formData.intro"}})],1),e._v(" "),n("Button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:e.createGroupNow}},[e._v("发起")])],1)],1):e._e()},staticRenderFns:[]}},,,function(e,t){}]),[248]);
//# sourceMappingURL=app.16f30a64731c49a009e3.js.map